(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{172:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/[location]",function(){return l(45320)}])},81999:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});var n=l(85893),o=l(67294),r=l(69077),s=l(64523),i=l(95117);function a(){let{connect:e,connectors:t}=(0,r.$4)(),{disconnect:l}=(0,r.qL)(),{isConnected:a,isDisconnected:c,address:d}=(0,r.mA)(),[u,h]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{window&&window.localStorage.getItem("connected")&&e({connector:t.at(0)})},[]),(0,o.useEffect)(()=>{h(a),a&&window&&window.localStorage.setItem("connected","metamask"),c&&window&&window.localStorage.removeItem("connected")},[a,c]),u?(0,n.jsxs)(s.x,{onClick:l,w:"100%",h:"100%",sx:{cursor:"pointer"},children:[d&&"".concat(d.substring(0,6),"...").concat(d.substring(d.length-6,d.length)),(0,n.jsx)(i.x,{c:"dimmed",size:"xs",children:"Disconnect"})]}):(0,n.jsx)(s.x,{onClick:async()=>{e({connector:t.at(0)})},w:"100%",h:"100%",sx:{cursor:"pointer"},children:"Connect"})}l(51521),l(2147)},17591:function(e,t,l){"use strict";l.d(t,{Z:function(){return z}});var n=l(85893),o=l(67294),r=l(80579),s=l(67841),i=l(54777),a=l(19236),c=l(37101),d=l(56817),u=l(62679),h=l(95117),f=l(43523),x=l(17789),p=l(69469);let m=(0,d.k)(e=>({doctorBtn:{cursor:"pointer",padding:e.spacing.lg,backgroundColor:"light"==e.colorScheme?e.white:e.colors.dark[6],border:"1px solid ".concat("light"==e.colorScheme?e.colors.gray[1]:e.black),borderRadius:e.radius.md,boxShadow:e.shadows.xs,transition:"200ms","&:hover":{transform:"scale(1.005)",backgroundColor:"light"==e.colorScheme?e.colors.gray[0]:e.colors.dark[5],boxShadow:e.shadows.sm,border:"1px solid ".concat("light"==e.colorScheme?e.colors.gray[2]:e.colors.gray[9])},"&:active":{transform:"scale(0.99)"}}}));function g(e){let{index:t,doctor:l,pending:o,onClick:r}=e,{classes:s}=m();return(0,n.jsxs)(u.r,{className:s.doctorBtn,onClick:r,mt:"xs",children:[(0,n.jsx)(u.r.Col,{span:1,children:(0,n.jsx)(h.x,{fz:"sm",fw:500,children:t+1})}),(0,n.jsx)(u.r.Col,{span:"auto",children:(0,n.jsx)(f.M,{children:(0,n.jsx)(h.x,{fz:"sm",fw:500,children:l})})}),(0,n.jsx)(u.r.Col,{span:2,dir:"rtl",children:(0,n.jsx)(x.C,{color:o?"green":"red",children:o?"Approved":"Not approved"})})]})}function w(e){let{allDoctors:t,pendingDoctors:l,setActiveTab:o}=e;return(0,n.jsxs)(p.M,{px:"xl",children:[(0,n.jsx)(h.x,{fz:"xl",fw:500,children:"All doctors"}),(0,n.jsx)(i.i,{}),t&&t.map((e,t)=>l&&(0,n.jsx)("div",{children:(0,n.jsx)(g,{index:t,doctor:e,pending:-1==l.indexOf(e),onClick:()=>o(e)})},t))]})}var j=l(69077),y=l(95439),v=l(33507);function z(e){let{user:t,setDoctor:l}=e,{allDoctors:d}=function(){let{contractAddress:e,abi:t,enabled:l}=(0,y.Z)(),{data:n}=(0,j.do)({address:e,abi:t,functionName:"getAllDrs",enabled:l});return{allDoctors:n}}(),{pendingDoctors:u}=function(){let{contractAddress:e,abi:t,enabled:l}=(0,y.Z)(),{data:n}=(0,j.do)({address:e,abi:t,functionName:"getPendingDrs",enabled:l});return{pendingDoctors:n}}(),[h,f]=(0,o.useState)("all");return(0,o.useEffect)(()=>{"all"==h&&l&&l(null)},[h]),d&&d.length>0?(0,n.jsxs)(r.m,{orientation:"vertical",onTabChange:f,value:h,keepMounted:!1,children:[(0,n.jsx)(r.m.Panel,{value:"all",children:(0,n.jsx)(r.m.List,{children:(0,n.jsx)(w,{allDoctors:d,pendingDoctors:u,setActiveTab:f})})}),d&&d.map((e,o)=>(0,n.jsxs)(r.m.Panel,{value:e,children:[(0,n.jsx)(s.z,{variant:"light",onClick:()=>f("all"),w:"100%",leftIcon:(0,n.jsx)(v.Z,{}),children:"Back to all doctors"}),(0,n.jsx)(i.i,{my:"sm"}),(0,n.jsx)(c.Z,{address:e,user:t,setDoctor:l})]},o))]}):(0,n.jsx)(a.D,{order:4,children:"No doctor registered yet"})}},29730:function(e,t,l){"use strict";l.d(t,{Z:function(){return f}});var n=l(85893),o=l(56817),r=l(62679),s=l(95117),i=l(43523),a=l(17789),c=l(69469),d=l(54777);let u=(0,o.k)(e=>({patientBtn:{cursor:"pointer",padding:e.spacing.lg,backgroundColor:"light"==e.colorScheme?e.white:e.colors.dark[6],border:"1px solid ".concat("light"==e.colorScheme?e.colors.gray[1]:e.black),borderRadius:e.radius.md,boxShadow:e.shadows.xs,transition:"200ms","&:hover":{transform:"scale(1.005)",backgroundColor:"light"==e.colorScheme?e.colors.gray[0]:e.colors.dark[5],boxShadow:e.shadows.sm,border:"1px solid ".concat("light"==e.colorScheme?e.colors.gray[2]:e.colors.gray[9])},"&:active":{transform:"scale(0.99)"}}}));function h(e){let{index:t,patient:l,onClick:o}=e,{classes:c}=u();return(0,n.jsxs)(r.r,{className:c.patientBtn,onClick:o,mt:"xs",children:[(0,n.jsx)(r.r.Col,{span:1,children:(0,n.jsx)(s.x,{fz:"sm",fw:500,children:t+1})}),(0,n.jsx)(r.r.Col,{span:"auto",children:(0,n.jsx)(i.M,{children:(0,n.jsx)(s.x,{fz:"sm",fw:500,children:l})})}),(0,n.jsx)(r.r.Col,{span:2,dir:"rtl",children:(0,n.jsx)(a.C,{color:"green",children:"Active"})})]})}function f(e){let{patients:t,setActiveTab:l}=e;return(0,n.jsxs)(c.M,{px:"xl",children:[(0,n.jsx)(s.x,{fz:"xl",fw:500,children:"All Patients"}),(0,n.jsx)(d.i,{}),t&&t.map((e,t)=>(0,n.jsx)("div",{children:(0,n.jsx)(h,{index:t,patient:e,onClick:()=>l(e)})},t))]})}},2147:function(e,t,l){"use strict";var n=l(85893);l(67294),t.Z=function(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.07em",height:"1em",viewBox:"0 0 256 240",...e,children:[(0,n.jsx)("path",{fill:"#E17726",d:"M250.066 0L140.219 81.279l20.427-47.9z"}),(0,n.jsx)("path",{fill:"#E27625",d:"m6.191.096l89.181 33.289l19.396 48.528zM205.86 172.858l48.551.924l-16.968 57.642l-59.243-16.311zm-155.721 0l27.557 42.255l-59.143 16.312l-16.865-57.643z"}),(0,n.jsx)("path",{fill:"#E27625",d:"m112.131 69.552l1.984 64.083l-59.371-2.701l16.888-25.478l.214-.245zm31.123-.715l40.9 36.376l.212.244l16.888 25.478l-59.358 2.7zM79.435 173.044l32.418 25.259l-37.658 18.181zm97.136-.004l5.131 43.445l-37.553-18.184z"}),(0,n.jsx)("path",{fill:"#D5BFB2",d:"m144.978 195.922l38.107 18.452l-35.447 16.846l.368-11.134zm-33.967.008l-2.909 23.974l.239 11.303l-35.53-16.833z"}),(0,n.jsx)("path",{fill:"#233447",d:"m100.007 141.999l9.958 20.928l-33.903-9.932zm55.985.002l24.058 10.994l-34.014 9.929z"}),(0,n.jsx)("path",{fill:"#CC6228",d:"m82.026 172.83l-5.48 45.04l-29.373-44.055zm91.95.001l34.854.984l-29.483 44.057zm28.136-44.444l-25.365 25.851l-19.557-8.937l-9.363 19.684l-6.138-33.849zm-148.237 0l60.435 2.749l-6.139 33.849l-9.365-19.681l-19.453 8.935z"}),(0,n.jsx)("path",{fill:"#E27525",d:"m52.166 123.082l28.698 29.121l.994 28.749zm151.697-.052l-29.746 57.973l1.12-28.8zm-90.956 1.826l1.155 7.27l2.854 18.111l-1.835 55.625l-8.675-44.685l-.003-.462zm30.171-.101l6.521 35.96l-.003.462l-8.697 44.797l-.344-11.205l-1.357-44.862z"}),(0,n.jsx)("path",{fill:"#F5841F",d:"m177.788 151.046l-.971 24.978l-30.274 23.587l-6.12-4.324l6.86-35.335zm-99.471 0l30.399 8.906l6.86 35.335l-6.12 4.324l-30.275-23.589z"}),(0,n.jsx)("path",{fill:"#C0AC9D",d:"m67.018 208.858l38.732 18.352l-.164-7.837l3.241-2.845h38.334l3.358 2.835l-.248 7.831l38.487-18.29l-18.728 15.476l-22.645 15.553h-38.869l-22.63-15.617z"}),(0,n.jsx)("path",{fill:"#161616",d:"m142.204 193.479l5.476 3.869l3.209 25.604l-4.644-3.921h-36.476l-4.556 4l3.104-25.681l5.478-3.871z"}),(0,n.jsx)("path",{fill:"#763E1A",d:"M242.814 2.25L256 41.807l-8.235 39.997l5.864 4.523l-7.935 6.054l5.964 4.606l-7.897 7.191l4.848 3.511l-12.866 15.026l-52.77-15.365l-.457-.245l-38.027-32.078zm-229.628 0l98.326 72.777l-38.028 32.078l-.457.245l-52.77 15.365l-12.866-15.026l4.844-3.508l-7.892-7.194l5.952-4.601l-8.054-6.071l6.085-4.526L0 41.809z"}),(0,n.jsx)("path",{fill:"#F5841F",d:"m180.392 103.99l55.913 16.279l18.165 55.986h-47.924l-33.02.416l24.014-46.808zm-104.784 0l-17.151 25.873l24.017 46.808l-33.005-.416H1.631l18.063-55.985zm87.776-70.878l-15.639 42.239l-3.319 57.06l-1.27 17.885l-.101 45.688h-30.111l-.098-45.602l-1.274-17.986l-3.32-57.045l-15.637-42.239z"})]})}},47213:function(e,t,l){"use strict";l.d(t,{Z:function(){return r}});var n=l(67294),o=l(44480);function r(e){let[t,l]=(0,n.useState)(!1),[r,s]=(0,n.useState)(null);return{isLoading:t,dataCID:r,setupCID:async function(t){l(!0);try{console.log("Uploading data....");let l=await (0,o.makeFileObjects)([t],[e]),n=await (0,o.storeIPFS)(l,{wrapWithDirectory:!1});console.log(n),s(n)}catch(e){throw l(!1),e}l(!1)},resetCID:function(){s(null)}}}},23204:function(e,t,l){"use strict";l.d(t,{Z:function(){return o}});var n=l(67294);function o(e){let[t,l]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let{loading:t,uploading:n,retrieving:o,encrypting:r,decrypting:s,signing:i,txnLoading:a,txnWaiting:c,success:d,failure:u}=e;t?l("loading"):n?l("uploading"):o?l("retrieving"):r?l("encrypting"):s?l("decrypting"):i?l("signing"):a?l("txnLoading"):c?l("txnWaiting"):d?l("success"):u?l("failure"):l(null)},[e]),t}},95439:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});var n=l(69077),o=l(59734);let r=e=>fetch(e).then(e=>e.json());function s(){let{data:e}=(0,o.ZP)("/api/constants",r),{chain:t}=(0,n.LN)(),{address:l}=(0,n.mA)(),s=e&&t&&JSON.parse(e).contractAddresses[t.id],i=e&&JSON.parse(e).abi,a=Boolean(e&&t&&l);return{address:l,chain:t,contractAddress:s,abi:i,enabled:a}}},45320:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return z}});var n=l(85893),o=l(67294),r=l(69077),s=l(1440),i=l(11163),a=l(80579),c=l(67841),d=l(17591),u=l(95439),h=l(29730),f=l(19236);function x(){let{allPatients:e}=function(){let{contractAddress:e,abi:t,enabled:l}=(0,u.Z)(),{data:n}=(0,r.do)({address:e,abi:t,functionName:"getAllPts",enabled:l});return{allPatients:n}}();return e&&e.length>0?(0,n.jsx)(h.Z,{patients:e,setActiveTab:()=>{}}):(0,n.jsx)(f.D,{order:4,children:"No patient registered yet"})}var p=l(26459),m=l(23204),g=l(5911),w=l(61263);function j(){let e=(0,i.useRouter)(),{location:t}=e.query,[l,s]=(0,o.useState)(null),{status:h,isDoctorPending:f,runApproveDoctor:j}=function(e){let{contractAddress:t,abi:l,enabled:n}=(0,u.Z)(),{isDoctorPending:s}=(0,p.Z)(e),[i,a]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),{config:h}=(0,r.PJ)({address:t,abi:l,functionName:"approveDr",args:[e],enabled:n&&e}),{writeAsync:f,isLoading:x}=(0,r.GG)(h);async function g(){try{let e=await f();a(!0),await e.wait(1),a(!1),d(!0)}catch(e){console.log(e)}}let w=(0,m.Z)({txnLoading:x,txnWaiting:i,success:c});return{status:w,isDoctorPending:s,runApproveDoctor:g}}(l),{status:y,isDoctorRegistered:v,runDisapproveDoctor:z}=function(e){let{contractAddress:t,abi:l,enabled:n}=(0,u.Z)(),{isDoctorRegistered:s}=(0,g.Z)(e),[i,a]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),{config:h}=(0,r.PJ)({address:t,abi:l,functionName:"disapproveDr",args:[e],enabled:n&&e}),{writeAsync:f,isLoading:x}=(0,r.GG)(h);async function p(){try{let e=await f();a(!0),await e.wait(1),a(!1),d(!0)}catch(e){console.log(e)}}let w=(0,m.Z)({txnLoading:x,txnWaiting:i,success:c});return{status:w,isDoctorRegistered:s,runDisapproveDoctor:p}}(l);return(0,o.useEffect)(()=>{("success"===h||"success"===y)&&e.reload(window.location.pathname)},[h,y]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.Z,{visible:h||y,status:h||y}),(0,n.jsxs)(a.m,{value:t,keepMounted:!1,children:[(0,n.jsxs)(a.m.Panel,{value:"all-doctors",children:[(0,n.jsx)(d.Z,{user:"admin",setDoctor:s}),l&&v&&f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.z,{onClick:j,variant:"white",ml:"xl",px:"xl",compact:!0,disabled:h||y,children:"Approve Doctor"}),(0,n.jsx)(c.z,{onClick:async()=>{await z()},variant:"white",ml:"xl",px:"xl",compact:!0,disabled:y||y,children:"Disapprove Doctor"})]})]}),(0,n.jsx)(a.m.Panel,{value:"all-patients",children:(0,n.jsx)(x,{})})]})]})}var y=l(65320),v=l(15710);function z(){let{address:e}=(0,r.mA)(),{isAdmin:t,isFetched:l}=(0,s.Z)(e),a=(0,i.useRouter)();(0,o.useEffect)(()=>{e||a.replace("/"),l&&!t&&a.replace("/")},[e,t]);let c=[{label:"All doctors",location:"all-doctors",icon:v.Z},{label:"All patients",location:"all-patients",icon:v.Z}];return(0,n.jsx)(y.Z,{loading:!e||!l||!t,navlinks:c,Controller:j})}},44480:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=l(92648).Z,o=l(80498),r=n(l(9669));async function s(){return new o.Web3Storage({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweGE4QjU5NDUzMzNjRDdkMmI0MERDMTczMzlmNDkxODQxODE0YmY0NkUiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2ODQ1ODM4NjU4NTIsIm5hbWUiOiJtZWRpY2FyZSJ9.WGeDiWh2Oh0eBjC53k8qDVdWfEPgY3ZvZhsuUI2J8ok"})}async function i(e,t){let l=[];for(let n=0;n<e.length;n++){let o=e[n],r=t[n],s="string"==typeof o?new Blob([o],{type:"application/json"}):new Blob([JSON.stringify(o)],{type:"application/json"});l.push(new File([s],r))}return l}async function a(e,t){let l=await s(),n=await l.put(e,t);return n}async function c(e){let t=await r.default.get("https://w3s.link/ipfs/".concat(e));return t.data}e.exports={makeFileObjects:i,storeIPFS:a,retrieveIPFS:c}},99766:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=l(51091);async function o(e){return await window.ethereum.request({method:"eth_getEncryptionPublicKey",params:[e]})}async function r(e,t,l){let r=(0,n.encrypt)({publicKey:l||await o(e),data:t,version:"x25519-xsalsa20-poly1305"});return r}async function s(e,t){let l=await window.ethereum.request({method:"eth_decrypt",params:[t,e]});return l}async function i(e,t){console.log(e),console.log(t),window.ethereum.request({method:"eth_signTypedData_v4",params:[e,JSON.stringify(t)]}).then(e=>{console.log(e)}).catch(e=>{console.log(e)})}e.exports={getPublicKey:o,encryptData:r,decryptData:s,sign:i}},88174:function(e){"use strict";e.exports={readAsDataURLAsync:function(e){return new Promise(t=>{let l=new FileReader;l.readAsDataURL(e),l.onloadend=()=>t(l.result)})},readAsTextAsync:function(e){return new Promise(t=>{let l=new FileReader;l.readAsText(e),l.onloadend=()=>t(l.result)})}}},993:function(){},88924:function(){},55024:function(){}},function(e){e.O(0,[297,849,324,737,213,78,779,164,581,498,250,101,774,888,179],function(){return e(e.s=172)}),_N_E=e.O()}]);