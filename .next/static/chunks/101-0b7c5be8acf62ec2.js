"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{37101:function(e,t,n){n.d(t,{Z:function(){return $}});var s=n(85893),r=n(95439),i=n(67294),a=n(69077),c=n(44480),l=n(88174),o=n(23204),d=n(56817),u=n(80579),x=n(64523),h=n(19236),m=n(62679),f=n(22870),j=n(95117),g=n(95078),p=n(72445),b=n(71232),Z=n(49834),v=n(16173),C=n(98066),w=n(68103),y=n(22289);let k=(0,d.k)(e=>({image:{border:"1px solid ".concat(e.colors.dark[0])},socialcard:{border:"1px solid ".concat(e.colors.dark[0]),borderRadius:e.radius.md,padding:e.spacing.md}}));function O(e){let{address:t,access:n,data:r,setEditedGeneralData:i}=e,{classes:a}=k();return r&&(0,s.jsxs)(s.Fragment,{children:[2==n&&(0,s.jsx)(y.Z,{initialValues:r,setEditedGeneralData:i}),(0,s.jsxs)(h.D,{order:3,children:["Dr. ",r.name,"'s profile "]}),(0,s.jsxs)(m.r,{mt:"xs",children:[(0,s.jsx)(m.r.Col,{span:3,bor:!0,children:(0,s.jsx)(f.E,{src:r.photo,height:200,width:200,radius:100,classNames:{image:"mantine-Image-image"},styles:{image:a.image},caption:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.x,{fw:500,children:r.name}),t&&"".concat(t.slice(0,6),"...").concat(t.slice(t.length-6,t.length))]})})}),(0,s.jsx)(m.r.Col,{span:5,children:(0,s.jsx)(g.i,{verticalSpacing:"sm",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(j.x,{tt:"capitalize",children:"Chain Address"})}),(0,s.jsx)("td",{children:(0,s.jsx)(j.x,{c:"dimmed",tt:"capitalize",span:!0,children:t})})]}),Object.keys(r).map((e,t)=>{if(-1==["photo","instagram","facebook","twitter"].indexOf(e))return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(j.x,{tt:"capitalize",children:e})}),(0,s.jsx)("td",{children:(0,s.jsx)(j.x,{c:"dimmed",tt:"capitalize",span:!0,children:r[e]})})]},t)})]})})}),(0,s.jsx)(m.r.Col,{span:1}),(0,s.jsx)(m.r.Col,{span:3,children:(0,s.jsxs)(p.W,{className:a.socialcard,children:[(0,s.jsx)(j.x,{fw:"bold",children:"Social"}),(0,s.jsxs)(b.Z,{mt:"lg",children:[(0,s.jsx)(Z.A,{component:"a",href:"https://instagram.com/".concat(r.instagram),target:"_blank",variant:"gradient",gradient:{from:"yellow",to:"purple",deg:45},children:(0,s.jsx)(v.Z,{})}),(0,s.jsx)(Z.A,{component:"a",href:"https://facebook.com/".concat(r.facebook),target:"_blank",color:"indigo",children:(0,s.jsx)(C.Z,{})}),(0,s.jsx)(Z.A,{component:"a",href:"https://twitter.com/".concat(r.twitter),target:"_blank",color:"blue",children:(0,s.jsx)(w.Z,{})})]})]})})]})]})}var D=n(15472),S=n(67841),E=n(78978),z=n(27657),A=n(30688);function F(e){let{access:t,certificates:n,setEditedCertificates:r}=e;async function i(e,t){let{media:s}=t;s&&"File"==s.constructor.name&&(t.media=await (0,l.readAsDataURLAsync)(s));let i=[...n];e<n.length?i[e]={...t}:i.push(t),r(i)}return(0,s.jsxs)("div",{children:[n&&n.map((e,a)=>(0,s.jsxs)(D.Z,{shadow:"xs",padding:"lg",mb:"lg",radius:"md",children:[(0,s.jsx)(j.x,{weight:500,children:e.title}),(0,s.jsx)(j.x,{size:"sm",color:"dimmed",children:e.description}),(0,s.jsxs)(b.Z,{mt:"xs",children:[(0,s.jsx)(S.z,{component:"a",href:e.media,download:!0,compact:!0,children:"Download certificate"}),2==t&&(0,s.jsx)(A.Z,{index:a,certificate:e,insertCertificate:i,BtnIcon:z.Z}),2==t&&(0,s.jsx)(S.z,{onClick:()=>{r([...n.slice(0,a),...n.slice(a+1,n.length)])},variant:"subtle",color:"red",compact:!0,children:"Delete"})]})]},a)),2==t&&(0,s.jsx)(A.Z,{index:n?n.length:1,certificate:{media:"",title:"",description:""},insertCertificate:i,BtnIcon:E.Z})]})}var N=n(26459),P=n(16417),R=n(99766),I=n(17789),G=n(35336);function _(e){let{access:t,address:n}=e,{isDoctorPending:c}=(0,N.Z)(n),{isLoading:l,isDoctor:o,registerDrConfirm:d}=function(){let{address:e,contractAddress:t,abi:n,enabled:s}=(0,r.Z)(),{isDoctor:c,runIsDoctor:l}=(0,P.Z)(e),[o,d]=(0,i.useState)(null),[u,x]=(0,i.useState)(!1),{writeAsync:h}=(0,a.GG)({address:t,abi:n,functionName:"registerDrConfirm",args:[o],enabled:s&&o});return(0,i.useEffect)(()=>{o&&(async()=>{try{let e=await h();await e.wait(1),await l()}catch(e){console.log(e)}d(null),x(!1)})()},[o]),{isLoading:u,isDoctor:c,runIsDoctor:l,registerDrConfirm:async function(){x(!0);try{d(await (0,R.getPublicKey)(e))}catch(e){console.log(e),x(!1)}}}}();return(0,s.jsxs)(b.Z,{children:[c?(0,s.jsx)(I.C,{color:"red",children:"Not Approved"}):(0,s.jsx)(I.C,{color:"green",children:"Approved"}),2==t&&(0,s.jsx)(s.Fragment,{children:!c&&!o&&(0,s.jsxs)(S.z,{onClick:d,variant:"subtle",disabled:l,compact:!0,children:[(0,s.jsx)(Z.A,{size:"sm",color:"blue",children:(0,s.jsx)(G.Z,{})})," ","Confirm Registration"]})})]})}var B=n(95422),H=n(506),L=n(9066),q=n(48985),V=n(72466),M=n(11163),T=n(60503),U=n(63934),K=n(61263),J=n(94355),W=n.n(J);let Y=(0,d.k)(e=>({tabs:{}}));function $(e){let{user:t,address:n,setDoctor:l}=e,d=(0,M.useRouter)(),{status:h,generalData:m,certificates:f,getData:j}=function(e){let{contractAddress:t,abi:n,enabled:s}=(0,r.Z)(),[l,d]=(0,i.useState)({generalData:{},certificates:[]}),[u,x]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),[f,j]=(0,i.useState)(!1),g=(0,o.Z)({retrieving:u,success:h,failure:f}),{data:p}=(0,a.do)({address:t,abi:n,functionName:"getDrHash",args:[e],enabled:s&&e});async function b(){x(!0);try{let e=await (0,c.retrieveIPFS)(p),t=e.certificates;delete e.certificates,e&&t&&d({generalData:e,certificates:t}),m(!0)}catch(e){console.log(e),j(!0)}x(!1)}return(0,i.useEffect)(()=>{p&&b()},[p]),{status:g,hashData:p,...l,getData:b}}(n),{status:g,updateData:p}=(0,H.Z)(),{access:b}=(0,L.Z)(n),[Z,v]=(0,i.useState)("general-details"),[C,w]=(0,i.useState)(),[y,k]=(0,i.useState)(),[D,S]=(0,i.useState)(!1),{classes:E}=Y();return(0,i.useEffect)(()=>{w(m),k(f)},[m,f]),(0,i.useEffect)(()=>{S(!(W()(m,C)&&W()(f,y)))},[C,y]),(0,i.useEffect)(()=>{"success"==g&&d.reload(window.location.pathname)},[g]),(0,i.useEffect)(()=>{l&&l(n)},[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.Z,{visible:Boolean(g),status:g}),(0,s.jsxs)(u.m,{value:Z,onTabChange:v,orientation:"horizontal",px:"xl",mt:"md",children:[(0,s.jsxs)(u.m.List,{className:E.tabs,grow:!0,children:[(0,s.jsx)(u.m.Tab,{value:"general-details",children:"General Details"}),(0,s.jsx)(u.m.Tab,{value:"certificates",children:"Doctor's Certificates"})]}),(0,s.jsxs)(x.x,{my:"md",children:[(0,s.jsx)(_,{access:b,address:n}),(0,s.jsx)(u.m.Panel,{value:"general-details",mt:"md",children:(0,s.jsx)(U.Z,{status:h,SkeletonComponent:()=>(0,s.jsx)(q.Z,{status:h}),RetryComponent:()=>(0,s.jsx)(T.Z,{status:h,retryHandler:j}),DataComponent:()=>(0,s.jsx)(O,{address:n,access:b,data:C,setEditedGeneralData:w})})}),(0,s.jsx)(u.m.Panel,{value:"certificates",mt:"md",children:(0,s.jsx)(U.Z,{status:h,SkeletonComponent:()=>(0,s.jsx)(V.Z,{status:h}),RetryComponent:()=>(0,s.jsx)(T.Z,{status:h,retryHandler:j}),DataComponent:()=>(0,s.jsx)(F,{access:b,certificates:y,setEditedCertificates:k})})})]})]}),(0,s.jsx)(B.Z,{isEdited:D,handleOnConfirm:async()=>{await p(C,y)},handleOnReset:()=>{w(m),k(f)}})]})}},22289:function(e,t,n){n.d(t,{Z:function(){return p}});var s=n(85893),r=n(88174),i=n(64523),a=n(94491),c=n(95117),l=n(69469),o=n(67841),d=n(98903),u=n(368),x=n(91759),h=n(21942),m=n(56837),f=n(39193),j=n(110),g=n(98401);function p(e){let{initialValues:t,setEditedGeneralData:n}=e,[p,{open:b,close:Z}]=(0,x.q)(!1),v=(0,d.c)({initialValues:{},validate:{photo:e=>e&&e.size/1024>250?"Size of file must be less than or equal to 250KB":null,name:e=>e?(0,u.d)({min:2,max:25},"Name must be 2-25 characters")(e):null,age:e=>e?e<18||e>99?"You must be 18-99 years old to register":null:0==e?"Age cannot be 0":null,gender:e=>e?(0,j.w)(/^(male|female|Male|Female)$/,"Input must be Male/male or Female/female")(e):null,phone:e=>e?(0,u.d)(10,"Phone number must be a 10 digit number")(e):null,email:e=>e?(0,g.J)("Invalid Email")(e):null},validateInputOnChange:["photo"],validateInputOnBlur:["name","age","gender","phone","email"]});return(0,s.jsxs)(i.x,{mb:"xs",children:[(0,s.jsx)(a.u,{opened:p,onClose:Z,title:(0,s.jsxs)(c.x,{children:["Edit your general data"," ",(0,s.jsx)(c.x,{c:"dimmed",size:"xs",children:"Fill out the fields you want to edit, leave empty to keep unchanged"})]}),children:(0,s.jsx)("form",{onSubmit:v.onSubmit(async e=>{let s={...e},{dob:i}=s;i&&(s.dob=s.dob.toDateString());let{photo:a}=s;a&&"File"==a.constructor.name&&(s.photo=await (0,r.readAsDataURLAsync)(a)),Object.keys(s).forEach(e=>!s[e]&&delete s[e]),n({...t,...s}),v.reset(),Z()}),children:(0,s.jsxs)(l.M,{cols:1,children:[(0,s.jsx)(m.Z,{form:v}),(0,s.jsx)(f.Z,{form:v}),(0,s.jsx)(o.z,{type:"submit",children:"Update fields"})]})})}),(0,s.jsxs)(o.z,{onClick:b,variant:"subtle",p:"0",compact:!0,children:[(0,s.jsx)(h.Z,{})," Edit data"]})]})}},78978:function(e,t,n){n.d(t,{Z:function(){return l}});var s=n(85893);let{Center:r,Button:i,ActionIcon:a}=n(79517),{IconPlus:c}=n(74563);function l(){return(0,s.jsx)(r,{children:(0,s.jsx)(i,{variant:"light",w:"100%",children:(0,s.jsx)(c,{})})})}},72466:function(e,t,n){n.d(t,{Z:function(){return a}});var s=n(85893);n(98836);var r=n(64523),i=n(38623);function a(e){let{status:t}=e;return(0,s.jsxs)(r.x,{my:"lg",children:[(0,s.jsx)(i.O,{height:120,w:"100%",radius:"md"}),(0,s.jsx)(i.O,{height:120,w:"100%",radius:"md",mt:"lg"}),(0,s.jsx)(i.O,{height:120,w:"100%",radius:"md",mt:"lg"})]})}},95422:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(85893),r=n(59897),i=n(95117),a=n(71232),c=n(67841),l=n(91759),o=n(67294);function d(e){let{isEdited:t,handleOnConfirm:n,handleOnReset:d}=e,[u,{open:x,close:h}]=(0,l.q)(t);return(0,o.useEffect)(()=>{t?x():h()},[t]),(0,s.jsxs)(r.V,{opened:u,onClose:h,size:"lg",radius:"md",children:[(0,s.jsxs)(i.x,{size:"sm",mb:"xs",weight:500,children:["Confirm or reset all profile data and certificates changes"," ",(0,s.jsx)(i.x,{color:"dimmed",size:"xs",children:"Confirm to save, reset to restore last saved state"})]}),(0,s.jsxs)(a.Z,{align:"flex-end",children:[(0,s.jsx)(c.z,{onClick:n,variant:"outline",compact:!0,children:"Confirm"}),(0,s.jsx)(c.z,{onClick:d,color:"red",variant:"outline",compact:!0,children:"Reset"})]})]})}},27657:function(e,t,n){n.d(t,{Z:function(){return a}});var s=n(85893);let{ActionIcon:r}=n(79517),{IconEdit:i}=n(74563);function a(){return(0,s.jsx)(r,{component:"button",color:"blue",variant:"subtle",radius:"xl",sx:{"&:hover":{backgroundColor:"none"}},children:(0,s.jsx)(i,{})})}},48985:function(e,t,n){n.d(t,{Z:function(){return c}});var s=n(85893);n(98836);var r=n(38623),i=n(62679),a=n(71232);function c(e){let{status:t,details:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.O,{height:25,w:"20%",my:"lg",radius:"xl"}),(0,s.jsxs)(i.r,{my:"xs",children:[(0,s.jsx)(i.r.Col,{span:3,bor:!0,children:(0,s.jsx)(r.O,{height:200,mt:15,circle:!0})}),(0,s.jsxs)(i.r.Col,{span:5,children:[(0,s.jsx)(r.O,{height:20,radius:"xl"}),(0,s.jsx)(r.O,{height:20,mt:15,radius:"xl"}),(0,s.jsx)(r.O,{height:20,mt:15,radius:"xl"}),(0,s.jsx)(r.O,{height:20,mt:15,radius:"xl"}),(0,s.jsx)(r.O,{height:20,mt:15,radius:"xl"}),(0,s.jsx)(r.O,{height:20,mt:15,radius:"xl"}),(0,s.jsx)(r.O,{height:20,mt:15,radius:"xl"}),(0,s.jsx)(r.O,{height:20,mt:15,radius:"xl"})]}),(0,s.jsx)(i.r.Col,{span:1}),(0,s.jsx)(i.r.Col,{span:3,children:(0,s.jsxs)(a.Z,{children:[(0,s.jsx)(r.O,{height:40,mt:6,circle:!0,radius:"xl"}),(0,s.jsx)(r.O,{height:40,mt:6,circle:!0,radius:"xl"}),(0,s.jsx)(r.O,{height:40,mt:6,circle:!0,radius:"xl"})]})})]})]})}},30688:function(e,t,n){n.d(t,{Z:function(){return o}});var s=n(85893),r=n(94491),i=n(95117),a=n(64523),c=n(91759),l=n(31020);function o(e){let{index:t,certificate:n,insertCertificate:o,BtnIcon:d}=e,[u,{open:x,close:h}]=(0,c.q)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.u,{opened:u,onClose:h,title:(0,s.jsx)(i.x,{children:"Add/Edit a certificate"}),children:(0,s.jsx)(l.Z,{index:t,initialValues:n||{},insertCertificate:o})}),(0,s.jsx)(a.x,{onClick:x,children:(0,s.jsx)(d,{})})]})}},60503:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(85893),r=n(98836),i=n.n(r),a=n(57327),c=n(95117),l=n(67841),o=n(55586);function d(e){let{status:t,retryHandler:n}=e;return(0,s.jsxs)(a.k,{align:"center",direction:"column",children:[(0,s.jsx)(c.x,{fw:"700",children:i()[t]}),(0,s.jsxs)(l.z,{color:"red",variant:"filled",onClick:()=>n(),compact:!0,children:[(0,s.jsx)(o.Z,{})," Reload"]})]})}},63934:function(e,t,n){n.d(t,{Z:function(){return c}});var s=n(85893),r=n(98836),i=n.n(r),a=n(12593);function c(e){let{status:t,SkeletonComponent:n,RetryComponent:r,DataComponent:c}=e;return"success"==t?(0,s.jsx)(c,{}):"failure"==t?(0,s.jsx)(r,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n,{}),(0,s.jsx)(a.P,{loading:!0,title:i()[t],withCloseButton:!1,sx:{border:"none",backgroundColor:"transparent",boxShadow:"none"},children:"Please wait, check for metamask popups"})]})}},9066:function(e,t,n){n.d(t,{Z:function(){return l}});var s=n(67294),r=n(69077),i=n(35450),a=n(16417),c=n(66191);function l(e){let{address:t}=(0,r.mA)(),{isPatient:n}=(0,c.Z)(e),{isDoctor:l}=(0,a.Z)(t),{patients:o}=(0,i.Z)(l),[d,u]=(0,s.useState)(0);return(0,s.useEffect)(()=>{e==t?u(2):n&&l&&-1!=o.indexOf(e)&&u(1)},[e,t,n,l,o]),{access:d}}},35450:function(e,t,n){n.d(t,{Z:function(){return c}});var s=n(64146),r=n(67294),i=n(69077),a=n(95439);function c(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{contractAddress:t,abi:n,enabled:c}=(0,a.Z)(),{data:l}=(0,i.mx)(),[o,d]=(0,r.useState)([]);async function u(){try{let e=new s.CH(t,n,l);d(await e.getPtsOfDr())}catch(e){console.log(e)}}return(0,r.useEffect)(()=>{e&&c&&l&&u()},[c,l,e]),{patients:o}}},16417:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(95439),r=n(69077);function i(e){let{contractAddress:t,enabled:n,abi:i}=(0,s.Z)(),{data:a,refetch:c}=(0,r.do)({address:t,abi:i,functionName:"isDoctor",args:[e],enabled:n&&e});return{isDoctor:a,runIsDoctor:c}}},26459:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(95439),r=n(69077);function i(e){let{contractAddress:t,enabled:n,abi:i}=(0,s.Z)(),{data:a,refetch:c}=(0,r.do)({address:t,abi:i,functionName:"isDrPending",args:[e],enabled:n&&e});return{isDoctorPending:a,runIsDoctorPending:c}}},506:function(e,t,n){n.d(t,{Z:function(){return l}});var s=n(67294),r=n(69077),i=n(47213),a=n(95439),c=n(23204);function l(){let{address:e,contractAddress:t,abi:n}=(0,a.Z)(),{isLoading:l,dataCID:o,setupCID:d,resetCID:u}=(0,i.Z)(e),{writeAsync:x,isLoading:h}=(0,r.GG)({address:t,abi:n,functionName:"setDrHash",args:[o]}),[m,f]=(0,s.useState)(!1),[j,g]=(0,s.useState)(!1),p=(0,c.Z)({uploading:l,txnLoading:h,txnWaiting:m,success:j});return(0,s.useEffect)(()=>{o&&(async()=>{try{let e=await x();f(!0),await e.wait(1),f(!1),g(!0)}catch(e){console.log(e),u()}})()},[o]),{status:p,updateData:async function(e,t){try{await d({...e,certificates:t})}catch(e){console.log(e)}}}}},94355:function(e){e.exports=function e(t,n){return t&&n&&"object"==typeof t&&"object"==typeof n?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce(function(s,r){return s&&e(t[r],n[r])},!0):t===n}}}]);